<div id="pieces-health" style="font-family:sans-serif; padding:1em; margin:1em 0;">
  Checking PiecesOS…
</div>

<!-- this bogus img will always error, firing our code -->
<img src="x" style="display:none"
  onerror="(function(){
    var s=document.getElementById('pieces-health');
    if(!s) return;
    async function check(){
      try {
        let r=await fetch('http://localhost:39300/.well-known/health',{cache:'no-store'});
        if(!r.ok) throw 'bad';
        let t=await r.text();
        if(t.startsWith('ok:')){
          s.textContent='✅ Running (id '+t.slice(3)+')';
          s.style.color='green';
        } else throw t;
      } catch(_){
        s.textContent='❌ Not detected';
        s.style.color='red';
      }
    }
    check();
    setInterval(check,30000);
  })();">
